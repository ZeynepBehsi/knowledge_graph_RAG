<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LangChain ile GraphRAG Ã–ÄŸrenme ModÃ¼lÃ¼</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --secondary: #7c3aed;
            --accent: #0891b2;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1e293b;
            --light: #f8fafc;
            --border: #e2e8f0;
            --lc-green: #15803d;
            --lc-light: #dcfce7;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.7;
            color: #334155;
            background: linear-gradient(135deg, #0ea5e9 0%, #6366f1 50%, #8b5cf6 100%);
            min-height: 100vh;
        }

        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }

        header {
            background: white;
            border-radius: 20px;
            padding: 45px 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 6px;
            background: linear-gradient(90deg, #0ea5e9, #6366f1, #8b5cf6, #10b981);
        }

        h1 {
            font-size: 2.6em;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #0ea5e9 0%, #6366f1 60%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle { color: #64748b; font-size: 1.1em; }

        .badge-row {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 18px;
        }
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }
        .badge-blue  { background: #dbeafe; color: #1e40af; }
        .badge-green { background: #dcfce7; color: #15803d; }
        .badge-purple{ background: #ede9fe; color: #5b21b6; }
        .badge-cyan  { background: #cffafe; color: #155e75; }

        .progress-bar { width:100%; height:8px; background:var(--border); border-radius:10px; overflow:hidden; margin-top:25px; }
        .progress-fill { height:100%; background:linear-gradient(90deg, #0ea5e9, #6366f1, #8b5cf6); width:0%; transition:width 0.8s ease; }

        /* NAV */
        .nav-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 25px;
            background: white;
            padding: 12px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            flex-wrap: wrap;
        }
        .tab-button {
            flex: 1;
            min-width: 160px;
            padding: 13px 18px;
            background: #f1f5f9;
            color: #475569;
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .tab-button:hover {
            background: #e0e7ff;
            color: #3730a3;
            transform: translateY(-2px);
        }
        .tab-button.active {
            background: linear-gradient(135deg, #0ea5e9, #6366f1);
            color: white;
            border-color: transparent;
            box-shadow: 0 5px 15px rgba(99,102,241,0.4);
        }

        /* CONTENT */
        .tab-content {
            display: none;
            background: white;
            border-radius: 18px;
            padding: 45px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.12);
            animation: fadeIn 0.4s ease;
        }
        .tab-content.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: #1e293b;
            border-bottom: 3px solid #e0e7ff;
            padding-bottom: 12px;
            margin: 30px 0 20px 0;
            font-size: 1.9em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        h2:first-child { margin-top: 0; }

        h3 { color: #4338ca; margin: 28px 0 14px 0; font-size: 1.35em; }
        h4 { color: #1e293b; margin: 18px 0 8px 0; font-size: 1.15em; }

        /* BOXES */
        .concept-box {
            border-left: 5px solid #6366f1;
            background: linear-gradient(135deg, #eef2ff 0%, #f5f3ff 100%);
            padding: 22px;
            margin: 20px 0;
            border-radius: 12px;
        }
        .concept-box.green  { border-color: #10b981; background: linear-gradient(135deg, #ecfdf5, #d1fae5); }
        .concept-box.yellow { border-color: #f59e0b; background: linear-gradient(135deg, #fffbeb, #fef3c7); }
        .concept-box.red    { border-color: #ef4444; background: linear-gradient(135deg, #fef2f2, #fee2e2); }
        .concept-box.cyan   { border-color: #0891b2; background: linear-gradient(135deg, #ecfeff, #cffafe); }

        /* CODE */
        .code-block {
            background: #0f172a;
            color: #e2e8f0;
            padding: 22px;
            border-radius: 12px;
            overflow-x: auto;
            margin: 14px 0;
            font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.7;
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
            position: relative;
        }
        .code-label {
            position: absolute;
            top: 8px; right: 14px;
            font-size: 0.75em;
            color: #64748b;
            font-family: sans-serif;
        }
        .kw  { color: #c792ea; font-weight: bold; }   /* keyword */
        .fn  { color: #82aaff; }                       /* function */
        .st  { color: #c3e88d; }                       /* string */
        .cm  { color: #546e7a; font-style: italic; }   /* comment */
        .nb  { color: #ffcb6b; }                       /* number/bool */
        .cl  { color: #f78c6c; }                       /* class */
        .at  { color: #89ddff; }                       /* attr/param */

        /* STEP CARDS */
        .step-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); gap: 18px; margin: 25px 0; }
        .step-card {
            background: white;
            border: 2px solid var(--border);
            border-radius: 14px;
            padding: 24px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .step-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 4px;
            background: linear-gradient(90deg, #0ea5e9, #6366f1);
        }
        .step-card:hover { transform: translateY(-6px); box-shadow: 0 12px 30px rgba(0,0,0,0.12); border-color: #6366f1; }
        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px; height: 40px;
            background: linear-gradient(135deg, #0ea5e9, #6366f1);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            font-size: 1.15em;
            margin-bottom: 14px;
        }

        /* DIAGRAM */
        .diagram-container {
            background: #f8fafc;
            border-radius: 14px;
            padding: 28px;
            margin: 22px 0;
            border: 2px dashed #cbd5e1;
        }
        .diagram-container h4 { color: #475569; margin-bottom: 16px; text-align: center; font-size: 1em; text-transform: uppercase; letter-spacing: 0.05em; }

        /* COMPONENT CARD */
        .component-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px,1fr)); gap: 20px; margin: 22px 0; }
        .component-card {
            border: 2px solid var(--border);
            border-radius: 14px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .component-card:hover { transform: translateY(-4px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .component-header {
            padding: 16px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .component-icon {
            width: 44px; height: 44px;
            border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.4em;
        }
        .component-body { padding: 16px 20px; }

        /* FLOW */
        .flow-row {
            display: flex;
            align-items: stretch;
            gap: 0;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        .flow-box {
            flex: 1;
            min-width: 130px;
            padding: 18px 14px;
            text-align: center;
            border-radius: 12px;
            font-size: 0.9em;
            position: relative;
        }
        .flow-arrow {
            display: flex;
            align-items: center;
            font-size: 1.6em;
            color: #94a3b8;
            padding: 0 4px;
        }

        /* TABLE */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 18px 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .data-table th {
            background: linear-gradient(135deg, #0ea5e9, #6366f1);
            color: white;
            padding: 14px 16px;
            text-align: left;
            font-weight: 600;
        }
        .data-table td { padding: 13px 16px; border-bottom: 1px solid #f1f5f9; }
        .data-table tr:hover td { background: #f8fafc; }
        .data-table tr:last-child td { border-bottom: none; }

        /* HIGHLIGHT */
        .hl { background: #fef9c3; padding: 2px 6px; border-radius: 4px; font-weight: 600; color: #92400e; }
        .hl-blue { background: #dbeafe; color: #1e40af; padding: 2px 6px; border-radius: 4px; font-weight: 600; }
        .hl-green { background: #dcfce7; color: #15803d; padding: 2px 6px; border-radius: 4px; font-weight: 600; }

        /* KEY POINTS */
        .key-points { background: linear-gradient(135deg, #eef2ff, #e0e7ff); border-radius: 14px; padding: 24px; margin: 22px 0; }
        .key-points ul { list-style: none; }
        .key-points li { padding: 9px 0 9px 32px; position: relative; border-bottom: 1px solid rgba(99,102,241,0.1); }
        .key-points li:last-child { border-bottom: none; }
        .key-points li::before { content: "âœ“"; position: absolute; left: 0; color: #6366f1; font-weight: bold; font-size: 1.2em; }

        /* INTERACTIVE */
        .interactive-box {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-radius: 14px;
            padding: 26px;
            margin: 22px 0;
            text-align: center;
        }
        .demo-btn {
            background: linear-gradient(135deg, #0ea5e9, #6366f1);
            color: white;
            padding: 11px 26px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 600;
            margin: 8px;
            transition: all 0.3s ease;
        }
        .demo-btn:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(99,102,241,0.4); }
        .demo-btn.secondary { background: linear-gradient(135deg, #10b981, #0891b2); }

        .result-box {
            background: white;
            border-radius: 10px;
            padding: 18px;
            margin-top: 16px;
            display: none;
            animation: slideDown 0.35s ease;
            text-align: left;
        }
        @keyframes slideDown { from { opacity:0; transform:translateY(-10px); } to { opacity:1; transform:translateY(0); } }

        /* MINI QUIZ */
        .quiz-box { background: #f0fdf4; border: 2px solid #86efac; border-radius: 14px; padding: 24px; margin: 22px 0; }
        .quiz-option {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px 18px;
            margin: 8px 0;
            background: white;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95em;
            transition: all 0.2s ease;
        }
        .quiz-option:hover { border-color: #6366f1; background: #eef2ff; }
        .quiz-option.correct { border-color: #10b981; background: #dcfce7; color: #15803d; }
        .quiz-option.wrong   { border-color: #ef4444; background: #fee2e2; color: #991b1b; }

        /* CALLOUT */
        .callout {
            display: flex;
            gap: 14px;
            padding: 18px;
            border-radius: 12px;
            margin: 16px 0;
        }
        .callout-icon { font-size: 1.6em; flex-shrink: 0; }
        .callout.tip   { background: #f0fdf4; border: 1px solid #86efac; }
        .callout.warn  { background: #fffbeb; border: 1px solid #fcd34d; }
        .callout.info  { background: #eff6ff; border: 1px solid #93c5fd; }

        /* ANALOGY CARD */
        .analogy-card {
            background: linear-gradient(135deg, #f5f3ff, #ede9fe);
            border: 2px solid #c4b5fd;
            border-radius: 14px;
            padding: 22px;
            margin: 18px 0;
        }
        .analogy-card .vs-row { display:flex; gap:10px; align-items:center; margin:14px 0; flex-wrap:wrap; }
        .analogy-side { flex:1; min-width:140px; background:white; border-radius:10px; padding:14px; text-align:center; }

        /* LAYER DIAGRAM */
        .layer-stack { margin: 22px 0; }
        .layer {
            padding: 16px 24px;
            border-radius: 10px;
            margin: 6px 0;
            display: flex;
            align-items: center;
            gap: 14px;
            transition: all 0.2s ease;
            cursor: default;
        }
        .layer:hover { transform: translateX(6px); }
        .layer-icon { font-size: 1.4em; }
        .layer-label { font-weight: 700; font-size: 1em; min-width: 200px; }
        .layer-desc { color: #475569; font-size: 0.92em; }

        footer {
            background: white;
            border-radius: 15px;
            padding: 28px;
            margin-top: 28px;
            text-align: center;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.08);
        }

        @media(max-width:768px) {
            h1 { font-size:1.7em; }
            .tab-button { min-width:100%; }
            .flow-row { flex-direction: column; }
            .flow-arrow { transform: rotate(90deg); align-self:center; }
            .tab-content { padding: 24px; }
        }

        /* Tooltip */
        .tip-word {
            border-bottom: 2px dotted #6366f1;
            cursor: help;
            position: relative;
        }
        .tip-word::after {
            content: attr(data-tip);
            position: absolute;
            bottom: 130%; left: 50%;
            transform: translateX(-50%);
            background: #1e293b;
            color: white;
            padding: 7px 12px;
            border-radius: 7px;
            white-space: nowrap;
            font-size: 0.82em;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            z-index: 100;
        }
        .tip-word:hover::after { opacity: 1; }
    </style>
</head>
<body>
<div class="container">

    <!-- HEADER -->
    <header>
        <h1>ğŸ”— LangChain ile GraphRAG</h1>
        <p class="subtitle">LangChain bileÅŸenlerinin Knowledge Graph tabanlÄ± RAG sistemlerinde nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± Ã¶ÄŸren</p>
        <div class="badge-row">
            <span class="badge badge-blue">ğŸ Python</span>
            <span class="badge badge-green">ğŸ¦œ LangChain</span>
            <span class="badge badge-purple">ğŸ•¸ï¸ Neo4j</span>
            <span class="badge badge-cyan">ğŸ¤– OpenAI</span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>
    </header>

    <!-- NAV -->
    <nav class="nav-tabs">
        <button class="tab-button active" onclick="openTab('t1', this)">ğŸ¦œ LangChain Nedir?</button>
        <button class="tab-button" onclick="openTab('t2', this)">ğŸ§© BileÅŸenler</button>
        <button class="tab-button" onclick="openTab('t3', this)">ğŸ”„ Pipeline</button>
        <button class="tab-button" onclick="openTab('t4', this)">ğŸ’» Kod Rehberi</button>
        <button class="tab-button" onclick="openTab('t5', this)">ğŸ¯ PekiÅŸtirme</button>
    </nav>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         TAB 1: LangChain Nedir?
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="t1" class="tab-content active">
        <h2>ğŸ¦œ LangChain Nedir?</h2>

        <div class="concept-box">
            <h3 style="margin-top:0;">Tek cÃ¼mleyle:</h3>
            <p style="font-size:1.15em;">LangChain, <strong>LLM'leri (bÃ¼yÃ¼k dil modelleri) dÄ±ÅŸ kaynaklarla â€” veritabanlarÄ±, belgeler, API'ler â€” baÄŸlamak iÃ§in geliÅŸtirilmiÅŸ bir Python framework'Ã¼dÃ¼r.</strong></p>
        </div>

        <div class="callout info">
            <div class="callout-icon">ğŸ’¡</div>
            <div>
                <strong>Neden gerekli?</strong> ChatGPT gibi modeller kendi baÅŸlarÄ±na gÃ¼Ã§lÃ¼dÃ¼r; ancak senin veritabanÄ±nÄ±, dosyalarÄ±nÄ± veya ÅŸirket belgelerini bilmezler. LangChain, bu boÅŸluÄŸu kapatÄ±r: modeli <em>senin verine</em> baÄŸlar.
            </div>
        </div>

        <h3>GerÃ§ek dÃ¼nya analojisi</h3>

        <div class="analogy-card">
            <p><strong>LangChain'i bir kÃ¼tÃ¼phane Ã§alÄ±ÅŸanÄ± gibi dÃ¼ÅŸÃ¼n:</strong></p>
            <div class="vs-row">
                <div class="analogy-side">
                    <div style="font-size:2em;">ğŸ™‹</div>
                    <strong>Sen (kullanÄ±cÄ±)</strong>
                    <p style="font-size:0.9em;margin-top:6px;">"NetApp'in ana iÅŸi nedir?"</p>
                </div>
                <div style="font-size:1.5em;">â†’</div>
                <div class="analogy-side" style="background:#eef2ff;">
                    <div style="font-size:2em;">ğŸ“š</div>
                    <strong>LangChain</strong>
                    <p style="font-size:0.9em;margin-top:6px;">DoÄŸru rafÄ± bulur, ilgili sayfalarÄ± alÄ±r, sana getirir</p>
                </div>
                <div style="font-size:1.5em;">â†’</div>
                <div class="analogy-side">
                    <div style="font-size:2em;">ğŸ¤–</div>
                    <strong>LLM (GPT)</strong>
                    <p style="font-size:0.9em;margin-top:6px;">Getirilen bilgiyi okur, sana cevap yazar</p>
                </div>
            </div>
        </div>

        <h3>LangChain olmadan vs. LangChain ile</h3>

        <table class="data-table">
            <thead>
                <tr>
                    <th>GÃ¶rev</th>
                    <th>âŒ LangChain Olmadan</th>
                    <th>âœ… LangChain ile</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Neo4j baÄŸlantÄ±sÄ±</td>
                    <td>Neo4j driver kurulumu + manual query runner</td>
                    <td><code>Neo4jGraph(url, user, pwd)</code> â€” tek satÄ±r</td>
                </tr>
                <tr>
                    <td>Metin parÃ§alama</td>
                    <td>Manuel regex veya sabit uzunluk kesimi</td>
                    <td><code>RecursiveCharacterTextSplitter</code></td>
                </tr>
                <tr>
                    <td>Embedding + arama</td>
                    <td>OpenAI API Ã§aÄŸrÄ±sÄ± + benzerlik hesabÄ± kendin</td>
                    <td><code>Neo4jVector.as_retriever()</code></td>
                </tr>
                <tr>
                    <td>Soru-cevap zinciri</td>
                    <td>Prompt mÃ¼hendisliÄŸi + API Ã§aÄŸrÄ±larÄ± + birleÅŸtirme</td>
                    <td><code>RetrievalQAWithSourcesChain</code></td>
                </tr>
            </tbody>
        </table>

        <h3>Bu projede LangChain'in yeri</h3>

        <div class="layer-stack">
            <div class="layer" style="background:#eff6ff;">
                <span class="layer-icon">ğŸ‘¤</span>
                <span class="layer-label">KullanÄ±cÄ±</span>
                <span class="layer-desc">Soru sorar â†’ Cevap alÄ±r</span>
            </div>
            <div class="layer" style="background:#eef2ff; border-left: 4px solid #6366f1;">
                <span class="layer-icon">ğŸ¦œ</span>
                <span class="layer-label">LangChain (Framework)</span>
                <span class="layer-desc">TÃ¼m parÃ§alarÄ± birbirine baÄŸlar: Retriever â†’ Chain â†’ LLM â†’ Cevap</span>
            </div>
            <div class="layer" style="background:#f0fdf4;">
                <span class="layer-icon">ğŸ•¸ï¸</span>
                <span class="layer-label">Neo4j (VeritabanÄ±)</span>
                <span class="layer-desc">Chunk node'larÄ±, metadatalarÄ± ve vektÃ¶rleri saklar</span>
            </div>
            <div class="layer" style="background:#fefce8;">
                <span class="layer-icon">ğŸ¤–</span>
                <span class="layer-label">OpenAI (Model)</span>
                <span class="layer-desc">Embedding hesaplar + DoÄŸal dilde cevap Ã¼retir</span>
            </div>
        </div>

        <div class="callout tip">
            <div class="callout-icon">ğŸ¯</div>
            <div>
                <strong>Ã–nemli:</strong> LangChain bir LLM deÄŸil, bir <em>orkestratÃ¶r</em>dÃ¼r. Kendi baÅŸÄ±na cevap Ã¼retmez; LLM'i, veritabanÄ±nÄ± ve embedding modelini bir araya getirir.
            </div>
        </div>

        <div class="key-points">
            <h4>Bu dersten Ã§Ä±karÄ±lacaklar</h4>
            <ul>
                <li>LangChain, LLM uygulamalarÄ± iÃ§in bir "tutkal" gÃ¶revi gÃ¶rÃ¼r</li>
                <li>Tek baÅŸÄ±na bir LLM (GPT) senin veritabanÄ±nÄ± bilmez â€” LangChain bu baÄŸlantÄ±yÄ± saÄŸlar</li>
                <li>Bu projede 6 farklÄ± LangChain bileÅŸeni kullanÄ±lÄ±yor</li>
                <li>Her bileÅŸen pipeline'Ä±n belirli bir adÄ±mÄ±ndan sorumludur</li>
            </ul>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         TAB 2: BileÅŸenler
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="t2" class="tab-content">
        <h2>ğŸ§© LangChain BileÅŸenleri</h2>

        <p>Bu projede kullanÄ±lan <strong>6 LangChain bileÅŸeni</strong> ve her birinin ne iÅŸe yaradÄ±ÄŸÄ±:</p>

        <div class="diagram-container">
            <h4>BileÅŸenlerin pipeline iÃ§indeki yeri</h4>
            <div class="mermaid">
            graph LR
                A[ğŸ“„ Ham Metin] -->|"RecursiveCharacterTextSplitter"| B[âœ‚ï¸ Chunks]
                B -->|"Neo4jGraph.query()"| C[ğŸ•¸ï¸ Neo4j Nodes]
                C -->|"OpenAIEmbeddings"| D[ğŸ”¢ VektÃ¶rler]
                D -->|"Neo4jVector"| E[ğŸ” Vector Store]
                E -->|"as_retriever()"| F[ğŸ“¥ Retriever]
                F -->|"RetrievalQAWithSourcesChain"| G[ğŸ¤– ChatOpenAI]
                G --> H[ğŸ’¬ Cevap]
                style A fill:#e0e7ff
                style B fill:#fef3c7
                style C fill:#dcfce7
                style D fill:#cffafe
                style E fill:#fce7f3
                style G fill:#fef9c3
                style H fill:#dcfce7
            </div>
        </div>

        <!-- COMPONENT 1 -->
        <h3>1ï¸âƒ£ Neo4jGraph â€” VeritabanÄ± KÃ¶prÃ¼sÃ¼</h3>

        <div class="component-card">
            <div class="component-header" style="background:#eff6ff;">
                <div class="component-icon" style="background:#dbeafe;">ğŸ•¸ï¸</div>
                <div>
                    <div style="font-weight:700;">langchain_community.graphs.Neo4jGraph</div>
                    <div style="color:#64748b;font-size:0.88em;">Neo4j veritabanÄ±na baÄŸlanÄ±r ve Cypher sorgularÄ± Ã§alÄ±ÅŸtÄ±rÄ±r</div>
                </div>
            </div>
            <div class="component-body">
                <div class="code-block">
<span class="kw">from</span> langchain_community.graphs <span class="kw">import</span> <span class="cl">Neo4jGraph</span>

<span class="cm"># BaÄŸlantÄ± kur</span>
kg = <span class="cl">Neo4jGraph</span>(
    url=<span class="st">"bolt://localhost:7687"</span>,
    username=<span class="st">"neo4j"</span>,
    password=<span class="st">"password"</span>,
    database=<span class="st">"neo4j"</span>
)

<span class="cm"># Cypher sorgusu Ã§alÄ±ÅŸtÄ±r</span>
result = kg.<span class="fn">query</span>(<span class="st">"MATCH (n:Chunk) RETURN count(n)"</span>)
<span class="cm"># â†’ [{'count(n)': 80}]</span>
                </div>
                <div class="callout info" style="margin-top:12px;">
                    <div class="callout-icon">ğŸ“Œ</div>
                    <div><strong>Ne yapar:</strong> Python'dan Neo4j'e Cypher sorgusu gÃ¶nderir ve sonucu Python dict listesi olarak dÃ¶ndÃ¼rÃ¼r. MERGE, CREATE, DELETE gibi yazma iÅŸlemleri de yapÄ±lÄ±r.</div>
                </div>
            </div>
        </div>

        <!-- COMPONENT 2 -->
        <h3>2ï¸âƒ£ RecursiveCharacterTextSplitter â€” Metin ParÃ§alayÄ±cÄ±</h3>

        <div class="component-card">
            <div class="component-header" style="background:#fefce8;">
                <div class="component-icon" style="background:#fef9c3;">âœ‚ï¸</div>
                <div>
                    <div style="font-weight:700;">langchain.text_splitter.RecursiveCharacterTextSplitter</div>
                    <div style="color:#64748b;font-size:0.88em;">Uzun metinleri Ã¶rtÃ¼ÅŸen parÃ§alara bÃ¶ler</div>
                </div>
            </div>
            <div class="component-body">
                <div class="code-block">
<span class="kw">from</span> langchain.text_splitter <span class="kw">import</span> <span class="cl">RecursiveCharacterTextSplitter</span>

text_splitter = <span class="cl">RecursiveCharacterTextSplitter</span>(
    chunk_size=<span class="nb">2000</span>,      <span class="cm"># her parÃ§a max 2000 karakter</span>
    chunk_overlap=<span class="nb">200</span>,    <span class="cm"># parÃ§alar 200 karakter Ã¶rtÃ¼ÅŸÃ¼r</span>
    length_function=len
)

chunks = text_splitter.<span class="fn">split_text</span>(uzun_metin)
<span class="cm"># â†’ ["NetApp, 1992 yÄ±lÄ±nda...", "kurulduÄŸunda Ã¶ne Ã§Ä±ktÄ±...", ...]</span>
                </div>
                <div style="margin-top:14px;">
                    <p><strong>Neden "Recursive"?</strong> Ã–nce paragraflarÄ±, sonra cÃ¼mleleri, en son kelimeleri bÃ¶ler â€” mÃ¼mkÃ¼n olduÄŸu kadar anlamlÄ± noktalardan keser.</p>
                    <div style="background:#f8fafc;border-radius:10px;padding:14px;margin-top:12px;font-family:monospace;font-size:0.88em;">
                        <div style="color:#64748b;margin-bottom:6px;">Overlap gÃ¶rselleÅŸtirmesi:</div>
                        <div>Chunk 1: <span style="background:#dbeafe;padding:2px 4px;border-radius:3px;">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="background:#fce7f3;padding:2px 4px;border-radius:3px;">&nbsp;overlap&nbsp;</span></div>
                        <div style="margin-top:4px;">Chunk 2: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background:#fce7f3;padding:2px 4px;border-radius:3px;">&nbsp;overlap&nbsp;</span><span style="background:#dcfce7;padding:2px 4px;border-radius:3px;">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
                        <div style="color:#64748b;margin-top:6px;">â†‘ CÃ¼mle sÄ±nÄ±rÄ±nda kesilme olmaz, baÄŸlam korunur</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- COMPONENT 3 -->
        <h3>3ï¸âƒ£ OpenAIEmbeddings â€” Anlam VektÃ¶rleri</h3>

        <div class="component-card">
            <div class="component-header" style="background:#f0fdf4;">
                <div class="component-icon" style="background:#dcfce7;">ğŸ”¢</div>
                <div>
                    <div style="font-weight:700;">langchain_openai.OpenAIEmbeddings</div>
                    <div style="color:#64748b;font-size:0.88em;">Metni 1536 boyutlu anlam vektÃ¶rÃ¼ne Ã§evirir</div>
                </div>
            </div>
            <div class="component-body">
                <div class="code-block">
<span class="kw">from</span> langchain_openai <span class="kw">import</span> <span class="cl">OpenAIEmbeddings</span>

embeddings = <span class="cl">OpenAIEmbeddings</span>()

<span class="cm"># Tek metin â†’ vektÃ¶r</span>
vector = embeddings.<span class="fn">embed_query</span>(<span class="st">"NetApp nedir?"</span>)
<span class="cm"># â†’ [0.0174, -0.0054, ..., 0.0082]  (1536 sayÄ±)</span>

<span class="cm"># Bu sayÄ±lar metnin ANLAMINI temsil eder.</span>
<span class="cm"># "NetApp nedir?" â‰ˆ "Tell me about NetApp" (vektÃ¶rler yakÄ±n)</span>
                </div>
                <div class="callout tip" style="margin-top:12px;">
                    <div class="callout-icon">ğŸ§²</div>
                    <div>Benzer anlamlÄ± metinler, vektÃ¶r uzayÄ±nda birbirine yakÄ±n olur. Bu yÃ¼zden "aÅŸk filmleri" sorusu "A love story" sloganÄ±nÄ± bulabilir â€” aynÄ± kelimeler olmasa bile.</div>
                </div>
            </div>
        </div>

        <!-- COMPONENT 4 -->
        <h3>4ï¸âƒ£ Neo4jVector â€” VektÃ¶r Deposu</h3>

        <div class="component-card">
            <div class="component-header" style="background:#fdf4ff;">
                <div class="component-icon" style="background:#fae8ff;">ğŸ”</div>
                <div>
                    <div style="font-weight:700;">langchain_community.vectorstores.Neo4jVector</div>
                    <div style="color:#64748b;font-size:0.88em;">Neo4j'deki vektÃ¶r index'i LangChain VectorStore'a baÄŸlar</div>
                </div>
            </div>
            <div class="component-body">
                <div class="code-block">
<span class="kw">from</span> langchain_community.vectorstores <span class="kw">import</span> <span class="cl">Neo4jVector</span>

<span class="cm"># Mevcut Neo4j graf'Ä±ndan vektÃ¶r store oluÅŸtur</span>
vector_store = <span class="cl">Neo4jVector</span>.<span class="fn">from_existing_graph</span>(
    embedding=<span class="cl">OpenAIEmbeddings</span>(),
    url=NEO4J_URI,
    username=NEO4J_USERNAME,
    password=NEO4J_PASSWORD,
    index_name=<span class="st">'form_10k_chunks'</span>,    <span class="cm"># Neo4j'deki index adÄ±</span>
    node_label=<span class="st">'Chunk'</span>,               <span class="cm"># hangi node tipi</span>
    text_node_properties=[<span class="st">'text'</span>],     <span class="cm"># metin hangi property'de</span>
    embedding_node_property=<span class="st">'textEmbedding'</span>  <span class="cm"># vektÃ¶r hangi property'de</span>
)
                </div>
                <div class="callout info" style="margin-top:12px;">
                    <div class="callout-icon">ğŸ”Œ</div>
                    <div>Bu bileÅŸen, Neo4j'deki vektÃ¶r index'ini LangChain'in standart <code>VectorStore</code> arayÃ¼zÃ¼ne uyarlar. BÃ¶ylece retriever olarak kullanÄ±labilir.</div>
                </div>
            </div>
        </div>

        <!-- COMPONENT 5 -->
        <h3>5ï¸âƒ£ ChatOpenAI â€” Dil Modeli</h3>

        <div class="component-card">
            <div class="component-header" style="background:#fffbeb;">
                <div class="component-icon" style="background:#fef9c3;">ğŸ¤–</div>
                <div>
                    <div style="font-weight:700;">langchain_openai.ChatOpenAI</div>
                    <div style="color:#64748b;font-size:0.88em;">GPT modelini Ã§aÄŸÄ±rÄ±r ve doÄŸal dil cevabÄ± Ã¼retir</div>
                </div>
            </div>
            <div class="component-body">
                <div class="code-block">
<span class="kw">from</span> langchain_openai <span class="kw">import</span> <span class="cl">ChatOpenAI</span>

llm = <span class="cl">ChatOpenAI</span>(
    temperature=<span class="nb">0</span>     <span class="cm"># 0 = tutarlÄ±/deterministik cevaplar</span>
                      <span class="cm"># 1 = daha yaratÄ±cÄ±/deÄŸiÅŸken</span>
)
                </div>
                <div style="margin-top:12px;">
                    <table class="data-table">
                        <thead><tr><th>temperature</th><th>DavranÄ±ÅŸ</th><th>Ne zaman?</th></tr></thead>
                        <tbody>
                            <tr><td><code>0</code></td><td>Her seferinde aynÄ± cevap</td><td>Fakt tabanlÄ± QA (bu projede)</td></tr>
                            <tr><td><code>0.7</code></td><td>Biraz Ã§eÅŸitlilik</td><td>YaratÄ±cÄ± yazarlÄ±k, Ã¶zetleme</td></tr>
                            <tr><td><code>1.0</code></td><td>Ã‡ok yaratÄ±cÄ±/Ã¶ngÃ¶rÃ¼lemez</td><td>Hikaye, ÅŸiir Ã¼retimi</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- COMPONENT 6 -->
        <h3>6ï¸âƒ£ RetrievalQAWithSourcesChain â€” Tam RAG Zinciri</h3>

        <div class="component-card">
            <div class="component-header" style="background:#f0fdf4;">
                <div class="component-icon" style="background:#dcfce7;">â›“ï¸</div>
                <div>
                    <div style="font-weight:700;">langchain.chains.RetrievalQAWithSourcesChain</div>
                    <div style="color:#64748b;font-size:0.88em;">TÃ¼m RAG pipeline'Ä±nÄ± tek nesneye baÄŸlar</div>
                </div>
            </div>
            <div class="component-body">
                <div class="code-block">
<span class="kw">from</span> langchain.chains <span class="kw">import</span> <span class="cl">RetrievalQAWithSourcesChain</span>

chain = <span class="cl">RetrievalQAWithSourcesChain</span>.<span class="fn">from_chain_type</span>(
    <span class="cl">ChatOpenAI</span>(temperature=<span class="nb">0</span>),   <span class="cm"># LLM</span>
    chain_type=<span class="st">"stuff"</span>,           <span class="cm"># chunk'larÄ± nasÄ±l birleÅŸtir</span>
    retriever=retriever            <span class="cm"># Neo4j'den chunk getiren retriever</span>
)

<span class="cm"># KullanÄ±m</span>
response = chain({<span class="st">"question"</span>: <span class="st">"NetApp nerede kurulmuÅŸ?"</span>})
<span class="cm"># response["answer"]  â†’ "NetApp, Sunnyvale, California'da..."</span>
<span class="cm"># response["sources"] â†’ "chunk_id_003, chunk_id_007"</span>
                </div>
                <div class="callout tip" style="margin-top:12px;">
                    <div class="callout-icon">âœ¨</div>
                    <div><strong>WithSources</strong> ekinin anlamÄ±: Sadece cevap deÄŸil, cevabÄ±n hangi belgeden/chunk'tan geldiÄŸini de dÃ¶ndÃ¼rÃ¼r. Bu <em>gÃ¼venilirlik</em> iÃ§in Ã§ok Ã¶nemlidir.</div>
                </div>
            </div>
        </div>

        <div class="key-points">
            <h4>6 BileÅŸenin Ã¶zeti</h4>
            <ul>
                <li><span class="hl-blue">Neo4jGraph</span> â†’ veritabanÄ±na baÄŸlan, Cypher Ã§alÄ±ÅŸtÄ±r</li>
                <li><span class="hl-blue">RecursiveCharacterTextSplitter</span> â†’ metni akÄ±llÄ±ca parÃ§ala</li>
                <li><span class="hl-blue">OpenAIEmbeddings</span> â†’ metni anlam vektÃ¶rÃ¼ne Ã§evir</li>
                <li><span class="hl-blue">Neo4jVector</span> â†’ Neo4j vektÃ¶r indexini retriever'a dÃ¶nÃ¼ÅŸtÃ¼r</li>
                <li><span class="hl-blue">ChatOpenAI</span> â†’ GPT modelini yapÄ±landÄ±r</li>
                <li><span class="hl-blue">RetrievalQAWithSourcesChain</span> â†’ hepsini birleÅŸtir, soru sor</li>
            </ul>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         TAB 3: Pipeline
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="t3" class="tab-content">
        <h2>ğŸ”„ GraphRAG Pipeline â€” AdÄ±m AdÄ±m</h2>

        <p>LangChain bileÅŸenlerinin bir araya gelerek tam bir RAG sistemini nasÄ±l oluÅŸturduÄŸunu gÃ¶relim. Pipeline'Ä±n iki aÅŸamasÄ± vardÄ±r: <span class="hl">HazÄ±rlÄ±k</span> ve <span class="hl-green">Sorgulama</span>.</p>

        <div class="diagram-container">
            <h4>Tam GraphRAG Mimarisi</h4>
            <div class="mermaid">
            graph TB
                subgraph PREP ["ğŸ“¦ HAZIRLIK AÅAMASI (bir kez Ã§alÄ±ÅŸÄ±r)"]
                    P1[ğŸ“„ Form 10-K JSON] --> P2
                    P2["âœ‚ï¸ RecursiveCharacterTextSplitter<br/>(chunk_size=2000, overlap=200)"] --> P3
                    P3[ğŸ“¦ 80 adet Chunk] --> P4
                    P4["ğŸ•¸ï¸ Neo4jGraph.query(MERGE)<br/>(Chunk node'larÄ± oluÅŸtur)"] --> P5
                    P5[ğŸ—ƒï¸ Neo4j GrafÄ±] --> P6
                    P6["ğŸ”¢ OpenAIEmbeddings<br/>(Her chunk â†’ 1536 boyutlu vektÃ¶r)"] --> P7
                    P7["ğŸ” Vector Index<br/>(form_10k_chunks)"]
                end

                subgraph QUERY ["ğŸ’¬ SORGULAMA AÅAMASI (her soruda Ã§alÄ±ÅŸÄ±r)"]
                    Q1[ğŸ‘¤ KullanÄ±cÄ± Sorusu] --> Q2
                    Q2["ğŸ”¢ OpenAIEmbeddings<br/>(Soruyu vektÃ¶re Ã§evir)"] --> Q3
                    Q3["ğŸ” Neo4jVector.as_retriever()<br/>(En benzer 5 chunk'Ä± bul)"] --> Q4
                    Q4[ğŸ“ Ä°lgili Chunk'lar] --> Q5
                    Q5["ğŸ¤– ChatOpenAI<br/>(Chunk + Soru â†’ Cevap)"] --> Q6
                    Q6[âœ… Cevap + Kaynak]
                end

                P7 --> Q3

                style PREP fill:#eef2ff,stroke:#6366f1,stroke-width:2px
                style QUERY fill:#f0fdf4,stroke:#10b981,stroke-width:2px
            </div>
        </div>

        <h3>HazÄ±rlÄ±k AÅŸamasÄ± â€” DetaylÄ± BakÄ±ÅŸ</h3>

        <div class="step-container">
            <div class="step-card">
                <div class="step-number">1</div>
                <h4>Veri YÃ¼kle</h4>
                <p>Form 10-K JSON belgesi Python'a yÃ¼klenir. <code>item1</code>, <code>item1a</code>, <code>item7</code> bÃ¶lÃ¼mleri Ã§ekilir.</p>
                <div class="code-block" style="font-size:0.82em;margin-top:10px;">
<span class="nb">json</span>.<span class="fn">load</span>(<span class="fn">open</span>(<span class="st">"form.json"</span>))
item_text = data[<span class="st">'item1'</span>]
                </div>
            </div>
            <div class="step-card">
                <div class="step-number">2</div>
                <h4>Metni ParÃ§ala</h4>
                <p>LangChain'in text splitter'Ä± metni 2000 karakterlik, 200 karakter Ã¶rtÃ¼ÅŸen chunk'lara bÃ¶ler.</p>
                <div class="code-block" style="font-size:0.82em;margin-top:10px;">
chunks = text_splitter
  .<span class="fn">split_text</span>(item_text)
<span class="cm"># â†’ 20 chunk</span>
                </div>
            </div>
            <div class="step-card">
                <div class="step-number">3</div>
                <h4>Metadata Ekle</h4>
                <p>Her chunk'a kimlik bilgileri eklenir: chunkId, formId, CIK numarasÄ±, kaynak URL.</p>
                <div class="code-block" style="font-size:0.82em;margin-top:10px;">
{<span class="st">'chunkId'</span>: <span class="st">'form-item1-0001'</span>,
 <span class="st">'text'</span>: <span class="st">'NetApp is...'</span>,
 <span class="st">'source'</span>: <span class="st">'sec.gov/...'</span>}
                </div>
            </div>
            <div class="step-card">
                <div class="step-number">4</div>
                <h4>Neo4j'e Yaz</h4>
                <p>Her chunk iÃ§in Neo4j'de <code>:Chunk</code> node'u oluÅŸturulur. MERGE ile tekrar yÃ¼kleme Ã¶nlenir.</p>
                <div class="code-block" style="font-size:0.82em;margin-top:10px;">
kg.<span class="fn">query</span>(<span class="st">"""
  MERGE (c:Chunk
    {chunkId: $id})
"""</span>, params=chunk)
                </div>
            </div>
            <div class="step-card">
                <div class="step-number">5</div>
                <h4>Embedding Hesapla</h4>
                <p>Her chunk'Ä±n metni OpenAI API'ye gÃ¶nderilir, 1536 boyutlu vektÃ¶r alÄ±nÄ±r, Neo4j'e yazÄ±lÄ±r.</p>
                <div class="code-block" style="font-size:0.82em;margin-top:10px;">
genai.vector.encode(
  chunk.text, <span class="st">"OpenAI"</span>
)
<span class="cm"># â†’ [0.017, -0.005, ...]</span>
                </div>
            </div>
            <div class="step-card">
                <div class="step-number">6</div>
                <h4>Vector Index</h4>
                <p>Neo4j'de HNSW tabanlÄ± vector index oluÅŸturulur. Bu index arama hÄ±zÄ±nÄ± dramatik biÃ§imde artÄ±rÄ±r.</p>
                <div class="code-block" style="font-size:0.82em;margin-top:10px;">
<span class="kw">CREATE VECTOR INDEX</span>
  form_10k_chunks
<span class="kw">FOR</span> (c:Chunk)
<span class="kw">ON</span> (c.textEmbedding)
                </div>
            </div>
        </div>

        <h3>Sorgulama AÅŸamasÄ± â€” Soru SorulduÄŸunda</h3>

        <div class="diagram-container">
            <h4>Bir sorunun yolculuÄŸu</h4>
            <div class="mermaid">
            sequenceDiagram
                participant U as ğŸ‘¤ KullanÄ±cÄ±
                participant C as â›“ï¸ RAG Chain
                participant E as ğŸ”¢ OpenAIEmbeddings
                participant N as ğŸ•¸ï¸ Neo4j
                participant G as ğŸ¤– ChatGPT

                U->>C: "NetApp'in ana iÅŸi nedir?"
                C->>E: Soruyu gÃ¶nder
                E->>C: [0.031, -0.012, ..., 0.008] (1536 boyut)
                C->>N: vector.queryNodes(soru_vektÃ¶rÃ¼, top_k=5)
                N->>C: En benzer 5 chunk + benzerlik skoru
                Note over N,C: chunk_0001 (0.94), chunk_0003 (0.91),<br/>chunk_0007 (0.89)...
                C->>G: "Åu belgelere dayanarak cevapla: [chunk metinleri]<br/>Soru: NetApp'in ana iÅŸi nedir?"
                G->>C: "NetApp, hibrit bulut ortamlarÄ±nda..."
                C->>U: Cevap + Kaynak (chunk_0001, chunk_0003)
            </div>
        </div>

        <h3>chain_type: "stuff" Ne Demek?</h3>

        <div class="concept-box yellow">
            <h4>Chunk'larÄ± LLM'e gÃ¶nderme stratejileri</h4>
            <table class="data-table" style="margin-top:12px;">
                <thead><tr><th>Tip</th><th>YÃ¶ntem</th><th>Avantaj</th><th>Dezavantaj</th></tr></thead>
                <tbody>
                    <tr>
                        <td><strong>stuff âœ…</strong></td>
                        <td>TÃ¼m chunk'larÄ± tek prompt'a koy</td>
                        <td>Basit, hÄ±zlÄ±</td>
                        <td>Ã‡ok chunk varsa context limiti aÅŸÄ±lÄ±r</td>
                    </tr>
                    <tr>
                        <td>map_reduce</td>
                        <td>Her chunk'Ä± ayrÄ± Ã¶zet, sonra birleÅŸtir</td>
                        <td>BÃ¼yÃ¼k belgeler</td>
                        <td>Ã‡ok API Ã§aÄŸrÄ±sÄ±</td>
                    </tr>
                    <tr>
                        <td>refine</td>
                        <td>CevabÄ± chunk'larla sÄ±rayla geliÅŸtir</td>
                        <td>YÃ¼ksek kalite</td>
                        <td>YavaÅŸ, pahalÄ±</td>
                    </tr>
                </tbody>
            </table>
            <p style="margin-top:10px;"><strong>Bu projede "stuff" tercih edilir</strong> Ã§Ã¼nkÃ¼ top-k=5 ile az sayÄ±da kÃ¼Ã§Ã¼k chunk getirilir; context limitini aÅŸmaz.</p>
        </div>

        <div class="interactive-box">
            <h4>Pipeline SimÃ¼lasyonu</h4>
            <p style="margin-bottom:14px;">FarklÄ± sorular deneyin, pipeline'Ä±n her adÄ±mÄ± nasÄ±l Ã§alÄ±ÅŸÄ±r gÃ¶rÃ¼n:</p>
            <button class="demo-btn" onclick="simPipeline('netapp')">NetApp Sorusu</button>
            <button class="demo-btn" onclick="simPipeline('apple')">Apple Sorusu</button>
            <button class="demo-btn" onclick="simPipeline('risk')">Risk FaktÃ¶rleri</button>
            <div id="pipeline-result" class="result-box"></div>
        </div>

        <div class="key-points">
            <h4>Pipeline'dan Ã§Ä±karÄ±lacaklar</h4>
            <ul>
                <li>HazÄ±rlÄ±k aÅŸamasÄ± bir kez Ã§alÄ±ÅŸÄ±r; sorgulama her soruda tekrar eder</li>
                <li>LangChain, retriever ve LLM arasÄ±ndaki veriyi otomatik yÃ¶netir</li>
                <li><code>WithSources</code> sayesinde her cevap kaynaÄŸÄ±yla birlikte gelir</li>
                <li>Neo4j vector index, bÃ¼yÃ¼k veri setlerinde aramayÄ± hÄ±zlÄ± tutar</li>
            </ul>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         TAB 4: Kod Rehberi
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="t4" class="tab-content">
        <h2>ğŸ’» AdÄ±m AdÄ±m Kod Rehberi</h2>

        <p>Notebook 3'teki kodun tam bir walkthrough'u. Her bloÄŸu Ã§alÄ±ÅŸtÄ±rmadan Ã¶nce ne yaptÄ±ÄŸÄ±nÄ± anla.</p>

        <!-- SETUP -->
        <h3>0. Kurulum ve Import'lar</h3>
        <div class="code-block">
<span class="label" style="color:#64748b;font-size:0.8em;float:right;">notebook 3 â€” cell 1</span>
<span class="cm"># â”€â”€ LangChain bileÅŸenleri â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="kw">from</span> langchain_community.graphs <span class="kw">import</span> <span class="cl">Neo4jGraph</span>         <span class="cm"># DB kÃ¶prÃ¼sÃ¼</span>
<span class="kw">from</span> langchain_community.vectorstores <span class="kw">import</span> <span class="cl">Neo4jVector</span>   <span class="cm"># VektÃ¶r deposu</span>
<span class="kw">from</span> langchain_openai <span class="kw">import</span> <span class="cl">OpenAIEmbeddings</span>              <span class="cm"># Embedding modeli</span>
<span class="kw">from</span> langchain.text_splitter <span class="kw">import</span> <span class="cl">RecursiveCharacterTextSplitter</span>
<span class="kw">from</span> langchain.chains <span class="kw">import</span> <span class="cl">RetrievalQAWithSourcesChain</span>   <span class="cm"># QA zinciri</span>
<span class="kw">from</span> langchain_openai <span class="kw">import</span> <span class="cl">ChatOpenAI</span>                    <span class="cm"># GPT modeli</span>

<span class="cm"># â”€â”€ DiÄŸer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="kw">import</span> json, textwrap
<span class="kw">from</span> dotenv <span class="kw">import</span> load_dotenv
<span class="kw">import</span> os

load_dotenv(<span class="st">'.env'</span>, override=<span class="nb">True</span>)
        </div>
        <div class="callout warn">
            <div class="callout-icon">âš ï¸</div>
            <div>API key'leri asla koda yazma. <code>.env</code> dosyasÄ±nda sakla, <code>python-dotenv</code> ile yÃ¼kle.</div>
        </div>

        <!-- STEP 1 -->
        <h3>1. Neo4j BaÄŸlantÄ±sÄ±</h3>
        <div class="code-block">
<span class="cm"># Neo4jGraph â†’ Python'dan Neo4j'e kÃ¶prÃ¼</span>
kg = <span class="cl">Neo4jGraph</span>(
    url=os.<span class="fn">getenv</span>(<span class="st">'NEO4J_URI'</span>),
    username=os.<span class="fn">getenv</span>(<span class="st">'NEO4J_USERNAME'</span>),
    password=os.<span class="fn">getenv</span>(<span class="st">'NEO4J_PASSWORD'</span>),
    database=os.<span class="fn">getenv</span>(<span class="st">'NEO4J_DATABASE'</span>) <span class="kw">or</span> <span class="st">'neo4j'</span>
)

<span class="cm"># Test: baÄŸlantÄ± Ã§alÄ±ÅŸÄ±yor mu?</span>
kg.<span class="fn">query</span>(<span class="st">"RETURN 1 AS test"</span>)   <span class="cm"># â†’ [{'test': 1}]</span>
        </div>

        <!-- STEP 2 -->
        <h3>2. Text Splitter Ayarla</h3>
        <div class="code-block">
text_splitter = <span class="cl">RecursiveCharacterTextSplitter</span>(
    chunk_size=<span class="nb">2000</span>,
    chunk_overlap=<span class="nb">200</span>,
    length_function=len,
    is_separator_regex=<span class="nb">False</span>
)

<span class="cm"># Test</span>
test_chunks = text_splitter.<span class="fn">split_text</span>(<span class="st">"Bu Ã§ok uzun bir metin..."</span>)
<span class="fn">print</span>(<span class="fn">len</span>(test_chunks), <span class="st">"chunk oluÅŸtu"</span>)
        </div>

        <!-- STEP 3 -->
        <h3>3. Chunk Metadata HazÄ±rla</h3>
        <div class="code-block">
<span class="kw">def</span> <span class="fn">split_form10k_data_from_file</span>(file):
    chunks_with_metadata = []
    file_as_object = json.<span class="fn">load</span>(<span class="fn">open</span>(file))

    <span class="kw">for</span> item <span class="kw">in</span> [<span class="st">'item1'</span>, <span class="st">'item1a'</span>, <span class="st">'item7'</span>, <span class="st">'item7a'</span>]:
        item_text = file_as_object[item]
        item_text_chunks = text_splitter.<span class="fn">split_text</span>(item_text)

        <span class="kw">for</span> i, chunk <span class="kw">in</span> <span class="fn">enumerate</span>(item_text_chunks[:<span class="nb">20</span>]):
            form_id = file[file.<span class="fn">rindex</span>(<span class="st">'/'</span>)+<span class="nb">1</span> : file.<span class="fn">rindex</span>(<span class="st">'.'</span>)]
            chunks_with_metadata.<span class="fn">append</span>({
                <span class="st">'text'</span>: chunk,
                <span class="st">'chunkId'</span>: <span class="kw">f</span><span class="st">'{form_id}-{item}-chunk{i:04d}'</span>,
                <span class="st">'f10kItem'</span>: item,
                <span class="st">'chunkSeqId'</span>: i,
                <span class="st">'formId'</span>: form_id,
                <span class="st">'names'</span>: file_as_object[<span class="st">'names'</span>],   <span class="cm"># ÅŸirket adÄ±</span>
                <span class="st">'cik'</span>: file_as_object[<span class="st">'cik'</span>],         <span class="cm"># SEC kimlik no</span>
                <span class="st">'source'</span>: file_as_object[<span class="st">'source'</span>]   <span class="cm"># kaynak URL</span>
            })
    <span class="kw">return</span> chunks_with_metadata
        </div>

        <!-- STEP 4 -->
        <h3>4. Neo4j'e Chunk Node'larÄ± Yaz</h3>
        <div class="code-block">
merge_chunk_node_query = <span class="st">"""
MERGE (c:Chunk {chunkId: $chunkParam.chunkId})
    ON CREATE SET
        c.text       = $chunkParam.text,
        c.formId     = $chunkParam.formId,
        c.f10kItem   = $chunkParam.f10kItem,
        c.chunkSeqId = $chunkParam.chunkSeqId,
        c.names      = $chunkParam.names,
        c.cik        = $chunkParam.cik,
        c.source     = $chunkParam.source
RETURN c
"""</span>

<span class="cm"># Uniqueness constraint â†’ aynÄ± chunkId iki kez yaratÄ±lmaz</span>
kg.<span class="fn">query</span>(<span class="st">"""
  CREATE CONSTRAINT unique_chunk IF NOT EXISTS
  FOR (c:Chunk) REQUIRE c.chunkId IS UNIQUE
"""</span>)

<span class="cm"># TÃ¼m chunk'larÄ± yaz</span>
<span class="kw">for</span> chunk <span class="kw">in</span> first_file_chunks:
    kg.<span class="fn">query</span>(merge_chunk_node_query,
             params={<span class="st">'chunkParam'</span>: chunk})
        </div>

        <!-- STEP 5 -->
        <h3>5. Vector Index ve Embedding'leri Hesapla</h3>
        <div class="code-block">
<span class="cm"># Vector index oluÅŸtur (bir kez)</span>
kg.<span class="fn">query</span>(<span class="st">"""
  CREATE VECTOR INDEX form_10k_chunks IF NOT EXISTS
  FOR (c:Chunk) ON (c.textEmbedding)
  OPTIONS { indexConfig: {
    `vector.dimensions`: 1536,
    `vector.similarity_function`: 'cosine'
  }}
"""</span>)

<span class="cm"># Embedding'leri hesapla ve node'lara kaydet</span>
<span class="cm"># Bu adÄ±m OpenAI API Ã§aÄŸrÄ±sÄ± yapar â€” paralelde tÃ¼m chunk'lar</span>
kg.<span class="fn">query</span>(<span class="st">"""
  MATCH (chunk:Chunk) WHERE chunk.textEmbedding IS NULL
  WITH chunk, genai.vector.encode(
    chunk.text, "OpenAI",
    { token: $openAiApiKey, endpoint: $openAiEndpoint }
  ) AS vector
  CALL db.create.setNodeVectorProperty(chunk, "textEmbedding", vector)
"""</span>,
params={<span class="st">"openAiApiKey"</span>: OPENAI_API_KEY,
        <span class="st">"openAiEndpoint"</span>: OPENAI_ENDPOINT})
        </div>

        <!-- STEP 6 -->
        <h3>6. LangChain RAG Zincirini Kur</h3>
        <div class="code-block">
<span class="cm"># â”€â”€ 6a. Vector Store â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="cm"># Neo4j'deki mevcut index'i LangChain VectorStore'a baÄŸla</span>
neo4j_vector_store = <span class="cl">Neo4jVector</span>.<span class="fn">from_existing_graph</span>(
    embedding=<span class="cl">OpenAIEmbeddings</span>(),
    url=NEO4J_URI, username=NEO4J_USERNAME, password=NEO4J_PASSWORD,
    index_name=<span class="st">'form_10k_chunks'</span>,
    node_label=<span class="st">'Chunk'</span>,
    text_node_properties=[<span class="st">'text'</span>],
    embedding_node_property=<span class="st">'textEmbedding'</span>
)

<span class="cm"># â”€â”€ 6b. Retriever â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="cm"># VectorStore'u retriever interface'e Ã§evir</span>
retriever = neo4j_vector_store.<span class="fn">as_retriever</span>()

<span class="cm"># â”€â”€ 6c. QA Zinciri â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
chain = <span class="cl">RetrievalQAWithSourcesChain</span>.<span class="fn">from_chain_type</span>(
    <span class="cl">ChatOpenAI</span>(temperature=<span class="nb">0</span>),
    chain_type=<span class="st">"stuff"</span>,
    retriever=retriever
)
        </div>

        <!-- STEP 7 -->
        <h3>7. Soru Sor</h3>
        <div class="code-block">
<span class="kw">def</span> <span class="fn">prettychain</span>(question: str):
    response = chain(
        {<span class="st">"question"</span>: question},
        return_only_outputs=<span class="nb">True</span>
    )
    <span class="fn">print</span>(textwrap.<span class="fn">fill</span>(response[<span class="st">'answer'</span>], <span class="nb">60</span>))
    <span class="cm"># response['sources'] â†’ kaynak chunk ID'leri</span>

<span class="cm"># Dene!</span>
<span class="fn">prettychain</span>(<span class="st">"What is Netapp's primary business?"</span>)
<span class="cm"># â†’ NetApp provides intelligent data infrastructure solutions</span>
<span class="cm">#   for customers worldwide, helping them manage and store data...</span>

<span class="fn">prettychain</span>(<span class="st">"Where is NetApp headquartered?"</span>)
<span class="cm"># â†’ NetApp is headquartered in Sunnyvale, California.</span>

<span class="fn">prettychain</span>(<span class="st">"Tell me about Apple."</span>)
<span class="cm"># â†’ I don't know.  (belgede Apple bilgisi yok â†’ halÃ¼sinasyon yok!)</span>
        </div>

        <div class="concept-box green">
            <h4>Neden "I don't know" cevabÄ± Ã¶nemli?</h4>
            <p>Retrieval tabanlÄ± sistemlerde LLM, <em>sadece getirilen chunk'lara dayanarak</em> cevap Ã¼retir. EÄŸer getirilen chunk'lar soruyla ilgisizse, model "bilmiyorum" der. Bu, <strong>halÃ¼sinasyonlarÄ± Ã¶nler</strong> ve sistemi gÃ¼venilir kÄ±lar.</p>
        </div>

        <div class="interactive-box">
            <h4>Kod BloklarÄ±: Hangi LangChain bileÅŸeni hangi adÄ±mda?</h4>
            <button class="demo-btn" onclick="showCodeRole('split')">ParÃ§alama</button>
            <button class="demo-btn" onclick="showCodeRole('store')">Veri Saklama</button>
            <button class="demo-btn" onclick="showCodeRole('retrieve')">Getirme</button>
            <button class="demo-btn" onclick="showCodeRole('generate')">Ãœretme</button>
            <div id="code-role-result" class="result-box"></div>
        </div>

        <div class="key-points">
            <h4>Kod rehberinden Ã§Ä±karÄ±lacaklar</h4>
            <ul>
                <li>Import'lar projenin hangi LangChain bileÅŸenlerini kullandÄ±ÄŸÄ±nÄ± aÃ§Ä±kÃ§a gÃ¶sterir</li>
                <li><code>MERGE</code> ile node yazÄ±lÄ±r â€” aynÄ± chunk iki kez oluÅŸturulmaz</li>
                <li>Embedding hesaplama <em>Neo4j iÃ§inde</em> yapÄ±lÄ±r (<code>genai.vector.encode</code>), LangChain dÄ±ÅŸarÄ±dan yÃ¶netir</li>
                <li><code>from_existing_graph</code>, zaten dolu olan Neo4j index'ini kullanÄ±r â€” yeniden hesaplama olmaz</li>
            </ul>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         TAB 5: PekiÅŸtirme
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="t5" class="tab-content">
        <h2>ğŸ¯ PekiÅŸtirme ve Ã–zet</h2>

        <!-- QUIZ -->
        <h3>Mini Quiz</h3>

        <div class="quiz-box">
            <h4>Soru 1: Hangi LangChain bileÅŸeni uzun metni kÃ¼Ã§Ã¼k parÃ§alara bÃ¶ler?</h4>
            <button class="quiz-option" onclick="checkAnswer(this, false)">A) Neo4jVector</button>
            <button class="quiz-option" onclick="checkAnswer(this, true)">B) RecursiveCharacterTextSplitter</button>
            <button class="quiz-option" onclick="checkAnswer(this, false)">C) ChatOpenAI</button>
            <button class="quiz-option" onclick="checkAnswer(this, false)">D) RetrievalQAWithSourcesChain</button>
            <div id="q1-feedback" style="margin-top:10px;display:none;"></div>
        </div>

        <div class="quiz-box">
            <h4>Soru 2: <code>temperature=0</code> parametresi ne anlama gelir?</h4>
            <button class="quiz-option" onclick="checkAnswer(this, false)">A) Model hiÃ§ cevap Ã¼retmez</button>
            <button class="quiz-option" onclick="checkAnswer(this, false)">B) Cevaplar Ã§ok yaratÄ±cÄ± ve deÄŸiÅŸken olur</button>
            <button class="quiz-option" onclick="checkAnswer(this, true)">C) Cevaplar tutarlÄ± ve deterministik olur</button>
            <button class="quiz-option" onclick="checkAnswer(this, false)">D) API maliyeti sÄ±fÄ±ra dÃ¼ÅŸer</button>
        </div>

        <div class="quiz-box">
            <h4>Soru 3: <code>RetrievalQAWithSources</code> standart <code>RetrievalQA</code>'dan farkÄ± nedir?</h4>
            <button class="quiz-option" onclick="checkAnswer(this, false)">A) Daha hÄ±zlÄ± Ã§alÄ±ÅŸÄ±r</button>
            <button class="quiz-option" onclick="checkAnswer(this, false)">B) Daha az API Ã§aÄŸrÄ±sÄ± yapar</button>
            <button class="quiz-option" onclick="checkAnswer(this, true)">C) CevabÄ±n hangi belgeden geldiÄŸini de dÃ¶ndÃ¼rÃ¼r</button>
            <button class="quiz-option" onclick="checkAnswer(this, false)">D) TÃ¼rkÃ§e cevap Ã¼retir</button>
        </div>

        <div class="quiz-box">
            <h4>Soru 4: <code>chunk_overlap=200</code> neden kullanÄ±lÄ±r?</h4>
            <button class="quiz-option" onclick="checkAnswer(this, true)">A) Chunk sÄ±nÄ±rlarÄ±nda baÄŸlamÄ±n korunmasÄ± iÃ§in</button>
            <button class="quiz-option" onclick="checkAnswer(this, false)">B) Dosya boyutunu kÃ¼Ã§Ã¼ltmek iÃ§in</button>
            <button class="quiz-option" onclick="checkAnswer(this, false)">C) API maliyetini dÃ¼ÅŸÃ¼rmek iÃ§in</button>
            <button class="quiz-option" onclick="checkAnswer(this, false)">D) Neo4j baÄŸlantÄ± hÄ±zÄ±nÄ± artÄ±rmak iÃ§in</button>
        </div>

        <!-- Ã–ZET DÄ°YAGRAMI -->
        <h3>Tam Tablo: 6 BileÅŸen, Ne Ä°ÅŸ Yapar?</h3>

        <table class="data-table">
            <thead>
                <tr>
                    <th>BileÅŸen</th>
                    <th>GÃ¶rev</th>
                    <th>GiriÅŸ</th>
                    <th>Ã‡Ä±kÄ±ÅŸ</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>Neo4jGraph</code></td>
                    <td>DB baÄŸlantÄ±sÄ± ve Cypher Ã§alÄ±ÅŸtÄ±rma</td>
                    <td>Cypher sorgusu + params</td>
                    <td>Dict listesi</td>
                </tr>
                <tr>
                    <td><code>RecursiveCharacterTextSplitter</code></td>
                    <td>Metni kÃ¼Ã§Ã¼k parÃ§alara bÃ¶l</td>
                    <td>Uzun string</td>
                    <td>String listesi (chunk'lar)</td>
                </tr>
                <tr>
                    <td><code>OpenAIEmbeddings</code></td>
                    <td>Metni sayÄ±sal vektÃ¶re Ã§evir</td>
                    <td>String</td>
                    <td>1536 float listesi</td>
                </tr>
                <tr>
                    <td><code>Neo4jVector</code></td>
                    <td>Neo4j vector index'ini retriever'a baÄŸla</td>
                    <td>DB baÄŸlantÄ±sÄ± + index adÄ±</td>
                    <td>VectorStore objesi</td>
                </tr>
                <tr>
                    <td><code>ChatOpenAI</code></td>
                    <td>GPT ile cevap Ã¼ret</td>
                    <td>Prompt (chunk + soru)</td>
                    <td>DoÄŸal dil cevabÄ±</td>
                </tr>
                <tr>
                    <td><code>RetrievalQAWithSourcesChain</code></td>
                    <td>TÃ¼m RAG pipeline'Ä±nÄ± orkestre et</td>
                    <td>KullanÄ±cÄ± sorusu</td>
                    <td>Cevap + Kaynak</td>
                </tr>
            </tbody>
        </table>

        <!-- SYSTEM DIAGRAM -->
        <h3>Tek GÃ¶rselde Sistem</h3>

        <div style="background:#f8fafc;border-radius:14px;padding:28px;margin:22px 0;border:2px dashed #cbd5e1;">
            <p style="text-align:center;color:#475569;font-size:0.9em;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:20px;">Sistem Mimarisi</p>

            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;">

                <!-- SÃ¼tun 1: Veri -->
                <div style="background:#f0fdf4;border:2px solid #86efac;border-radius:12px;padding:16px;">
                    <div style="text-align:center;font-weight:700;color:#15803d;margin-bottom:14px;font-size:0.95em;">ğŸ“¦ VERÄ° AKIÅI</div>
                    <div style="display:flex;flex-direction:column;gap:6px;align-items:center;">
                        <div style="background:white;border:1px solid #bbf7d0;border-radius:8px;padding:8px 14px;font-size:0.85em;width:100%;text-align:center;">ğŸ“„ Form 10-K JSON</div>
                        <div style="color:#86efac;font-size:1.1em;">â†“ bÃ¶l</div>
                        <div style="background:#eef2ff;border:1px solid #c7d2fe;border-radius:8px;padding:8px 14px;font-size:0.85em;width:100%;text-align:center;">âœ‚ï¸ TextSplitter</div>
                        <div style="color:#86efac;font-size:1.1em;">â†“ yaz</div>
                        <div style="background:#eef2ff;border:1px solid #c7d2fe;border-radius:8px;padding:8px 14px;font-size:0.85em;width:100%;text-align:center;">ğŸ•¸ï¸ Neo4jGraph</div>
                        <div style="color:#86efac;font-size:1.1em;">â†“ node oluÅŸtur</div>
                        <div style="background:white;border:2px solid #4ade80;border-radius:8px;padding:8px 14px;font-size:0.85em;font-weight:600;width:100%;text-align:center;">ğŸ—ƒï¸ Neo4j DB</div>
                        <div style="color:#86efac;font-size:1.1em;">â†“ vektÃ¶r hesapla</div>
                        <div style="background:#eef2ff;border:1px solid #c7d2fe;border-radius:8px;padding:8px 14px;font-size:0.85em;width:100%;text-align:center;">ğŸ”¢ OpenAIEmbeddings</div>
                        <div style="color:#86efac;font-size:1.1em;">â†“ sakla</div>
                        <div style="background:white;border:2px solid #4ade80;border-radius:8px;padding:8px 14px;font-size:0.85em;font-weight:600;width:100%;text-align:center;">ğŸ” Vector Index</div>
                    </div>
                </div>

                <!-- SÃ¼tun 2: LangChain katmanÄ± -->
                <div style="background:#eef2ff;border:2px solid #818cf8;border-radius:12px;padding:16px;">
                    <div style="text-align:center;font-weight:700;color:#4338ca;margin-bottom:14px;font-size:0.95em;">ğŸ¦œ LANGCHAIN KATMANI</div>
                    <div style="display:flex;flex-direction:column;gap:8px;">
                        <div style="background:white;border:1px solid #c7d2fe;border-radius:8px;padding:10px 12px;font-size:0.82em;">
                            <div style="font-weight:600;color:#4338ca;">RecursiveCharacterTextSplitter</div>
                            <div style="color:#64748b;font-size:0.9em;">Metni parÃ§ala</div>
                        </div>
                        <div style="background:white;border:1px solid #c7d2fe;border-radius:8px;padding:10px 12px;font-size:0.82em;">
                            <div style="font-weight:600;color:#4338ca;">Neo4jGraph</div>
                            <div style="color:#64748b;font-size:0.9em;">DB baÄŸlantÄ±sÄ± + Cypher</div>
                        </div>
                        <div style="background:white;border:1px solid #c7d2fe;border-radius:8px;padding:10px 12px;font-size:0.82em;">
                            <div style="font-weight:600;color:#4338ca;">OpenAIEmbeddings</div>
                            <div style="color:#64748b;font-size:0.9em;">1536 boyutlu vektÃ¶rler</div>
                        </div>
                        <div style="background:white;border:1px solid #c7d2fe;border-radius:8px;padding:10px 12px;font-size:0.82em;">
                            <div style="font-weight:600;color:#4338ca;">Neo4jVector</div>
                            <div style="color:#64748b;font-size:0.9em;">Vector store + retriever</div>
                        </div>
                        <div style="background:white;border:1px solid #c7d2fe;border-radius:8px;padding:10px 12px;font-size:0.82em;">
                            <div style="font-weight:600;color:#4338ca;">ChatOpenAI</div>
                            <div style="color:#64748b;font-size:0.9em;">GPT ile cevap uret</div>
                        </div>
                        <div style="background:#4338ca;color:white;border-radius:8px;padding:10px 12px;font-size:0.82em;">
                            <div style="font-weight:600;">RetrievalQAWithSourcesChain</div>
                            <div style="opacity:0.8;font-size:0.9em;">Tum pipeline orkestratoru</div>
                        </div>
                    </div>
                </div>

                <!-- SÃ¼tun 3: Sorgulama -->
                <div style="background:#fffbeb;border:2px solid #fcd34d;border-radius:12px;padding:16px;">
                    <div style="text-align:center;font-weight:700;color:#92400e;margin-bottom:14px;font-size:0.95em;">ğŸ’¬ SORGULAMA AKIÅI</div>
                    <div style="display:flex;flex-direction:column;gap:6px;align-items:center;">
                        <div style="background:white;border:1px solid #fde68a;border-radius:8px;padding:8px 14px;font-size:0.85em;width:100%;text-align:center;">ğŸ‘¤ Kullanici Sorusu</div>
                        <div style="color:#fcd34d;font-size:1.1em;">â†“ embedding</div>
                        <div style="background:#eef2ff;border:1px solid #c7d2fe;border-radius:8px;padding:8px 14px;font-size:0.85em;width:100%;text-align:center;">ğŸ”¢ OpenAIEmbeddings</div>
                        <div style="color:#fcd34d;font-size:1.1em;">â†“ ara</div>
                        <div style="background:#eef2ff;border:1px solid #c7d2fe;border-radius:8px;padding:8px 14px;font-size:0.85em;width:100%;text-align:center;">ğŸ” Neo4jVector</div>
                        <div style="color:#fcd34d;font-size:1.1em;">â†“ top-5 chunk</div>
                        <div style="background:white;border:1px solid #fde68a;border-radius:8px;padding:8px 14px;font-size:0.85em;width:100%;text-align:center;">ğŸ“ Ilgili Chunklar</div>
                        <div style="color:#fcd34d;font-size:1.1em;">â†“ uret</div>
                        <div style="background:#eef2ff;border:1px solid #c7d2fe;border-radius:8px;padding:8px 14px;font-size:0.85em;width:100%;text-align:center;">ğŸ¤– ChatOpenAI</div>
                        <div style="color:#fcd34d;font-size:1.1em;">â†“</div>
                        <div style="background:#dcfce7;border:2px solid #4ade80;border-radius:8px;padding:8px 14px;font-size:0.85em;font-weight:600;width:100%;text-align:center;">âœ… Cevap + Kaynak</div>
                    </div>
                </div>

            </div>

            <!-- Alt bant: LangChain hepsini baÄŸlar -->
            <div style="margin-top:16px;background:linear-gradient(135deg,#eef2ff,#e0e7ff);border:2px solid #818cf8;border-radius:10px;padding:12px;text-align:center;font-size:0.88em;">
                <span style="font-weight:700;color:#4338ca;">ğŸ¦œ LangChain</span>
                <span style="color:#475569;margin:0 8px;">â€”</span>
                <span style="color:#475569;">Veri katmanini, embedding modelini ve LLM'i birbirine baglar. Her oku sen degil LangChain yonetir.</span>
            </div>
        </div>

        <!-- SONRAKÄ° ADIMLAR -->
        <h3>SÄ±rada Ne Var?</h3>

        <div class="step-container">
            <div class="step-card">
                <div class="step-number">A</div>
                <h4>Graph-Enhanced RAG</h4>
                <p>Chunk'larÄ± grafta birbirine baÄŸla. KomÅŸu node'lardan ek baÄŸlam al.</p>
                <div class="code-block" style="font-size:0.8em;margin-top:10px;">
<span class="cm"># NEXT chunk iliÅŸkisi</span>
<span class="kw">MERGE</span> (c1)-[:NEXT]->(c2)
                </div>
            </div>
            <div class="step-card">
                <div class="step-number">B</div>
                <h4>Hybrid Search</h4>
                <p>VektÃ¶r aramasÄ±na keyword aramasÄ±nÄ± ekle. Her ikisinin avantajlarÄ±ndan yararlan.</p>
                <div class="code-block" style="font-size:0.8em;margin-top:10px;">
<span class="cm"># Fulltext + Vector</span>
<span class="kw">CALL</span> db.index.fulltext
  .queryNodes(...)
                </div>
            </div>
            <div class="step-card">
                <div class="step-number">C</div>
                <h4>Multi-hop Reasoning</h4>
                <p>Graf Ã¼zerinde Ã§ok adÄ±mlÄ± sorgularla daha derin bilgi Ã§Ä±kar.</p>
                <div class="code-block" style="font-size:0.8em;margin-top:10px;">
<span class="cm"># 2 hop sorgulama</span>
<span class="kw">MATCH</span> (c)-[:NEXT*2]->(d)
                </div>
            </div>
            <div class="step-card">
                <div class="step-number">D</div>
                <h4>LangGraph</h4>
                <p>LangChain'in ajan framework'Ã¼. KarmaÅŸÄ±k, Ã§ok adÄ±mlÄ± iÅŸ akÄ±ÅŸlarÄ± kur.</p>
                <div class="code-block" style="font-size:0.8em;margin-top:10px;">
<span class="kw">from</span> langgraph.graph <span class="kw">import</span>
  <span class="cl">StateGraph</span>
                </div>
            </div>
        </div>

        <div class="concept-box green">
            <h4>ğŸ‰ Tebrikler!</h4>
            <p>Bu modÃ¼lÃ¼ tamamladÄ±ktan sonra ÅŸunlarÄ± biliyorsun:</p>
            <ul style="margin-top:10px;padding-left:20px;">
                <li>LangChain'in RAG'da neden kullanÄ±ldÄ±ÄŸÄ±nÄ±</li>
                <li>6 temel LangChain bileÅŸeninin gÃ¶revlerini</li>
                <li>HazÄ±rlÄ±k ve sorgulama aÅŸamalarÄ±nÄ±n nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ±</li>
                <li>Notebook 3'teki her kod bloÄŸunun ne yaptÄ±ÄŸÄ±nÄ±</li>
            </ul>
        </div>
    </div>

    <footer>
        <p style="font-size:1.05em;margin-bottom:8px;"><strong>ğŸ¦œ LangChain ile GraphRAG Ã–ÄŸrenme ModÃ¼lÃ¼</strong></p>
        <p style="color:#64748b;font-size:0.9em;">Kaynak: Lecture_notebooks/3-construct_kg_from_text.ipynb</p>
        <p style="margin-top:12px;font-size:0.85em;color:#94a3b8;">Â© 2026 â€” EÄŸitim AmaÃ§lÄ± Ä°Ã§erik</p>
    </footer>

</div>

<script>
    mermaid.initialize({
        startOnLoad: true,
        theme: 'default',
        themeVariables: {
            primaryColor: '#eef2ff',
            primaryTextColor: '#1e293b',
            primaryBorderColor: '#6366f1',
            lineColor: '#94a3b8',
            secondaryColor: '#f0fdf4',
            tertiaryColor: '#fefce8'
        }
    });

    const tabOrder = ['t1','t2','t3','t4','t5'];

    function openTab(id, btn) {
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        btn.classList.add('active');
        const idx = tabOrder.indexOf(id);
        document.getElementById('progressBar').style.width = ((idx+1)/tabOrder.length*100) + '%';
        window.scrollTo({top:0, behavior:'smooth'});

        // Gizli tab iÃ§indeki Mermaid diyagramlarÄ±nÄ± yeniden Ã§iz
        const tab = document.getElementById(id);
        const unrendered = tab.querySelectorAll('.mermaid:not([data-processed])');
        if (unrendered.length > 0) {
            mermaid.init(undefined, unrendered);
        }
    }

    function simPipeline(type) {
        const box = document.getElementById('pipeline-result');
        box.style.display = 'block';
        const data = {
            netapp: {
                q: 'What is Netapp\'s primary business?',
                steps: [
                    'â‘  Soru vektÃ¶re Ã§evrilir: [0.031, -0.008, ..., 0.019]',
                    'â‘¡ Neo4j\'de vector search: top-5 chunk bulundu',
                    'â‘¢ En yÃ¼ksek skor: chunk_0001 (0.947), chunk_0007 (0.921)',
                    'â‘£ 5 chunk + soru GPT\'ye gÃ¶nderildi',
                    'â‘¤ Cevap: "NetApp provides intelligent data infrastructure solutions..."',
                    'â‘¥ Kaynak: chunk_0001, chunk_0003, chunk_0007'
                ],
                color: '#dcfce7'
            },
            apple: {
                q: 'Tell me about Apple.',
                steps: [
                    'â‘  Soru vektÃ¶re Ã§evrilir: [0.012, -0.031, ..., 0.004]',
                    'â‘¡ Neo4j\'de vector search: top-5 chunk bulundu',
                    'â‘¢ En yÃ¼ksek skor: 0.61 (dÃ¼ÅŸÃ¼k â€” Apple bilgisi yok belgede)',
                    'â‘£ Ä°lgisiz chunk\'lar GPT\'ye gÃ¶nderildi',
                    'â‘¤ Cevap: "I don\'t know." âœ… HalÃ¼sinasyon yok!',
                    'â‘¥ Kaynak: â€” (boÅŸ)'
                ],
                color: '#fee2e2'
            },
            risk: {
                q: 'What are NetApp\'s main risk factors?',
                steps: [
                    'â‘  Soru vektÃ¶re Ã§evrilir: [âˆ’0.021, 0.044, ..., 0.016]',
                    'â‘¡ Neo4j\'de vector search: item1a (Risk Factors) chunk\'larÄ± Ã¶ne Ã§Ä±ktÄ±',
                    'â‘¢ En yÃ¼ksek skor: chunk_1a_0003 (0.934), chunk_1a_0008 (0.911)',
                    'â‘£ 5 risk faktÃ¶rÃ¼ chunk\'Ä± GPT\'ye gÃ¶nderildi',
                    'â‘¤ Cevap: "NetApp faces risks including competition, supply chain..."',
                    'â‘¥ Kaynak: chunk_1a_0003, chunk_1a_0005, chunk_1a_0008'
                ],
                color: '#fef9c3'
            }
        };
        const d = data[type];
        box.innerHTML = `
            <h4 style="margin-bottom:12px;">Soru: <em>"${d.q}"</em></h4>
            <div style="background:${d.color};border-radius:8px;padding:14px;">
                ${d.steps.map(s => `<div style="padding:5px 0;font-size:0.9em;">${s}</div>`).join('')}
            </div>
        `;
    }

    function showCodeRole(role) {
        const box = document.getElementById('code-role-result');
        box.style.display = 'block';
        const data = {
            split: {
                title: 'âœ‚ï¸ ParÃ§alama â€” RecursiveCharacterTextSplitter',
                desc: 'Ham metni alÄ±r, anlamlÄ± noktalarda 2000 karakterlik parÃ§alara bÃ¶ler. 200 karakterlik Ã¶rtÃ¼ÅŸme ile baÄŸlam korunur.',
                component: 'langchain.text_splitter.RecursiveCharacterTextSplitter',
                color: '#fefce8'
            },
            store: {
                title: 'ğŸ•¸ï¸ Veri Saklama â€” Neo4jGraph',
                desc: 'Chunk\'larÄ± Python dict olarak alÄ±r, Cypher MERGE sorgusuyla Neo4j\'de :Chunk node\'larÄ±na dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r. Tekrar yÃ¼klemede MERGE sayesinde duplikasyon olmaz.',
                component: 'langchain_community.graphs.Neo4jGraph',
                color: '#f0fdf4'
            },
            retrieve: {
                title: 'ğŸ” Getirme â€” Neo4jVector + as_retriever()',
                desc: 'KullanÄ±cÄ± sorusunu embedding\'e Ã§evirir, Neo4j vector index\'inde en benzer chunk\'larÄ± bulur ve LangChain Document listesi olarak dÃ¶ndÃ¼rÃ¼r.',
                component: 'langchain_community.vectorstores.Neo4jVector',
                color: '#eef2ff'
            },
            generate: {
                title: 'ğŸ¤– Ãœretme â€” ChatOpenAI + RetrievalQAWithSourcesChain',
                desc: 'Getirilen chunk\'larÄ± ve soruyu birleÅŸtirir, GPT\'ye gÃ¶nderir. Cevap + kaynak chunk ID\'lerini dÃ¶ndÃ¼rÃ¼r.',
                component: 'langchain_openai.ChatOpenAI + langchain.chains.RetrievalQAWithSourcesChain',
                color: '#fff7ed'
            }
        };
        const d = data[role];
        box.innerHTML = `
            <h4>${d.title}</h4>
            <p style="margin:10px 0;">${d.desc}</p>
            <div style="background:${d.color};border-radius:8px;padding:10px;font-family:monospace;font-size:0.88em;">
                <strong>BileÅŸen:</strong> ${d.component}
            </div>
        `;
    }

    function checkAnswer(btn, isCorrect) {
        const parent = btn.parentElement;
        const opts = parent.querySelectorAll('.quiz-option');
        opts.forEach(o => o.disabled = true);
        if (isCorrect) {
            btn.classList.add('correct');
            btn.textContent = 'âœ“ ' + btn.textContent + ' â€” DoÄŸru!';
        } else {
            btn.classList.add('wrong');
            // Highlight correct
            opts.forEach(o => {
                if (o !== btn) {
                    o.onclick({currentTarget: o});
                }
            });
        }
    }

    window.addEventListener('load', () => {
        document.getElementById('progressBar').style.width = '20%';
    });
</script>
</body>
</html>
